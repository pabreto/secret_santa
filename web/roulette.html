<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>roulette</title>
    <link rel="stylesheet" href="mystyle.css">
</head>
<body>
    <script>
        const queryString = location.search;
        const params = new URLSearchParams(queryString);
        const gifter = params.get("key");
    </script>
    <div id="containerroulette">
        <img src="../roulette.jpg" alt="Background Image" width="105%" height="100%">
        <video id="videoPlayer">
            <source id="videoSource" type="video/mp4">
        </video>
        <div id="overlay"></div>
    </div>
    <script>
        const videoSource = document.getElementById('videoSource');
        videoSource.src = "../" + gifter + "/roulette.mp4";
        const videoPlayer = document.getElementById('videoPlayer');
        videoPlayer.load();
    </script>
    <div id="manche">
        <div id="container-manche">
            <img id="playButton" src="../manche-roulette.png" width="50%">
        </div>
    </div>
    <div id="pere_noel">
        <div id="container-perenoel">
            <img id="pere_noel" src="../pere-noel-PA-hub.jpeg" width="50%">
        </div>
    </div>
    <div id="bulle-clique">
        <div id="container-bulle-clique">
            <img class="blinking-image" src="../bulle_clique.jpeg" alt="Blinking Image" width="50%" style="position: absolute; top: 300; left: 0;">
        </div>
    </div>
    <table class="hidden">
        <tr class="row1">
            <td>
                <img id="image1" alt="Image 1">
            </td>
            <td>
                <img id="image2" alt="Image 2">
            </td>
            <td>
                <img id="image3" alt="Image 3">
            </td>
        </tr>
        <tr class="row2">
            <td>
                <img id="image1_1" alt="Image 1.1">
            </td>
            <td>
                <img id="image1_2" alt="Image 1.2">
            </td>
            <td>
                <img id="image1_3" alt="Image 1.3">
            </td>
            <td>
                <img id="image2_1" alt="Image 2.1">
            </td>
            <td>
                <img id="image2_2" alt="Image 2.2">
            </td>
            <td>
                <img id="image2_3" alt="Image 2.3">
            </td>
        </tr>
    </table>
    <script>
        const playButton = document.getElementById('playButton');
        const blinkingImage = document.querySelector('.blinking-image');
        let isImageDown = false;

        // Add a click event listener to the image element
        playButton.addEventListener('click', function() {
            if (!isImageDown) {
                // Change the image source to "manche-roulette-down.png"
                playButton.src = '../manche-roulette-down.png';
            }

            // Play the video when the image is clicked
            videoPlayer.play();
            isImageDown = true; // Toggle the state
            const bulleCliqueContainer = document.getElementById('bulle-clique');
            bulleCliqueContainer.style.display = 'none';
        });

        // Add an event listener to the video's "ended" event
        videoPlayer.addEventListener('ended', function() {
            // When the video ends, display the lutins image
            const bulleCliqueContainer = document.getElementById('bulle-clique');
            bulleCliqueContainer.querySelector('img').src = '../bulle_instruction_1.png'; 
	    alert("replace the text of the bubble by 'Maintenant, si tu veux savoir qui d'autre offre des cadeaux aux mêmes que toi, clique sur mon doigt (ho ho ho en plus ça rime...)'")
            bulleCliqueContainer.style.display = 'block';
            // Now set the image sources with "gifter"
            document.getElementById('image1').src = "../" + gifter + "/" + "gifted1.png";
            document.getElementById('image2').src = "../" + gifter + "/" + "gifted2.png";
            document.getElementById('image3').src = "../" + gifter + "/" + "gifted3.png";
            document.getElementById('image1_1').src = "../" + gifter + "/lutins/lutin11.jpg";
            document.getElementById('image1_2').src = "../" + gifter + "/lutins/lutin12.jpg";
            document.getElementById('image1_3').src = "../" + gifter + "/lutins/lutin21.jpg";
            document.getElementById('image2_1').src = "../" + gifter + "/lutins/lutin22.jpg";
            document.getElementById('image2_2').src = "../" + gifter + "/lutins/lutin31.jpg";
            document.getElementById('image2_3').src = "../" + gifter + "/lutins/lutin32.jpg";
        });

        // Add a click event listener to the "pere_noel" image
        document.getElementById('pere_noel').addEventListener('click', function() {
            const table = document.querySelector('table');
            if (table.classList.contains('hidden')) {
                table.classList.remove('hidden');
            }
        });

        // JavaScript code to toggle the blinking image visibility
        setInterval(function() {
            blinkingImage.style.display = (blinkingImage.style.display === 'none') ? 'block' : 'none';
        }, 500); // 500ms interval for blinking
    </script>
</body>
</html>

